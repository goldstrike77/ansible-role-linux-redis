---
redis_server_parameters:
  - { regexp: '^appendonly ', line: 'appendonly yes' }
  - { regexp: '^bind ', line: 'bind 0.0.0.0' }
  - { regexp: '^daemonize ', line: 'daemonize yes' }
  - { regexp: '^dir /', line: 'dir {{ redis_path }}/redis' }
  - { regexp: '^maxclients ', line: 'maxclients {{ redis_maxclients }}' }
  - { regexp: '^maxmemory ', line: 'maxmemory {{ redis_maxmemory }}mb' }
  - { regexp: '^port ', line: 'port {{ redis_port }}' }
  - { regexp: '^requirepass ', line: 'requirepass {{ redis_requirepass }}' }
  - { regexp: '^supervised ', line: 'supervised systemd' }
  - { regexp: '^syslog-enabled ', line: 'syslog-enabled yes' }
  - { regexp: '^tcp-backlog ', line: 'tcp-backlog {{ redis_tcp_backlog }}' }
  - { regexp: '^tcp-keepalive ', line: 'tcp-keepalive {{ redis_tcp_keepalive }}' }
  - { regexp: '^timeout ', line: 'timeout {{ redis_timeout }}' }

redis_kernel_parameters:
  - { variable: 'vm.overcommit_memory', value: '1' }